<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- AUTH GUARD -->
  <script>
    if (!localStorage.getItem("token")) {
      window.location.href = "login.html";
    }
  </script>

  <!-- GLOW BACKGROUND -->
  <div class="glow-circle"></div>

  <!-- NAVBAR -->
  <div class="navbar">
    <button class="nav-home" onclick="window.location.href='index.html'">Home</button>
    <button class="nav-dashboard" onclick="window.location.href='dashboard.html'">Dashboard</button>
    <button class="nav-create" onclick="window.location.href='create.html'">New Board</button>
    <button class="nav-login" onclick="window.location.href='login.html'">Login</button>
    <button class="nav-register" onclick="window.location.href='register.html'">Register</button>
    <button class="nav-logout" onclick="logout()">Logout</button>
  </div>

  <!-- DARKMODE TOGGLE -->
  <button id="darkModeToggle">ðŸŒ™</button>

  <!-- DASHBOARD CONTENT -->
  <div class="dashboard-wrapper">
    <div class="dashboard-card">
      <h1 id="dashboardTitle">Hi </h1>
      <button id="createBoardBtn" class="create-board-btn">Create New Board</button>
      <button id="viewBoardsBtn" class="view-boards-btn" disabled>View Old Boards</button>

    </div>

    <div id="boardsContainer" class="boards-grid"></div>
  </div>

  <!-- DASHBOARD LOGIC -->
  <script src="dashboard.js"></script>

  <!-- GLOBAL SCRIPT -->
  <script>
    // Darkmode toggle
    const toggle = document.getElementById("darkModeToggle");
    const savedMode = localStorage.getItem("darkmode");

    if (savedMode === "on") {
      document.body.classList.add("darkmode");
      toggle.textContent = "â˜€ï¸";
    } else {
      toggle.textContent = "ðŸŒ™";
    }

    toggle.addEventListener("click", () => {
      const isDark = document.body.classList.toggle("darkmode");
      localStorage.setItem("darkmode", isDark ? "on" : "off");
      toggle.textContent = isDark ? "â˜€ï¸" : "ðŸŒ™";
    });

    // Logout
    function logout() {
      localStorage.removeItem("token");
      localStorage.removeItem("user");
      window.location.href = "login.html";
    }

    // Navbar visibility
    const token = localStorage.getItem("token");
    const loggedInButtons = document.querySelectorAll(".nav-dashboard, .nav-create, .nav-logout");
    const loggedOutButtons = document.querySelectorAll(".nav-login, .nav-register");

    if (token) {
      loggedInButtons.forEach(btn => btn.style.display = "inline-block");
      loggedOutButtons.forEach(btn => btn.style.display = "none");
    } else {
      loggedInButtons.forEach(btn => btn.style.display = "none");
      loggedOutButtons.forEach(btn => btn.style.display = "inline-block");
    }
  </script>

</body>
</html>